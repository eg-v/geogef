<%# Set the page title %>
<% @title = "Exam" %>

<div class="flex items-center justify-center">
  <div class="quiz-container max-w-full w-full sm:w-4/5 lg:w-2/5 bg-white rounded-lg shadow-lg overflow-hidden">
    <div class="p-6">
        <div class="flex items-center justify-between mb-4">
      <!-- Temporizador -->
      <div id="timer" class="text-right text-gray-700 font-semibold">
        Time left: <span id="time">00:00</span>
      </div>

      <!-- Botones -->
      <div class="flex space-x-4">
      <button id="button1" class="bg-white hover:bg-gray-100 text-black font-bold py-2 px-4 rounded flex items-center justify-center video-hover">
        <video src="/videos/bomb.mp4" autoplay loop muted class="w-12 h-12 object-cover">
          <!-- Asegúrate de proporcionar un texto alternativo o un mensaje en caso de que el video no se cargue -->
          Tu navegador no soporta el elemento <code>video</code>.
        </video>
      </button>

      <button id="button2" class="bg-white hover:bg-gray-100 text-black font-bold py-2 px-4 rounded flex items-center justify-center video-hover">
        <video src="/videos/clock.mp4" autoplay loop muted class="w-12 h-12 object-cover">
          <!-- Asegúrate de proporcionar un texto alternativo o un mensaje en caso de que el video no se cargue -->
          Tu navegador no soporta el elemento <code>video</code>.
        </video>
      </button>
      </div>
    </div>
      
      <%# Container for displaying the current question %>
      <div class="question p-4 rounded mb-4 bg-gradient-to-r from-fun-blue-500 to-fun-blue-600 text-white" id="question">
      </div>
      
      <%# Container for displaying SVG or image related to the question %>
      <div id="center-svg-container" class="flex justify-center mb-4">
        <div id="svg-container" class="w-36 h-36 flex items-center justify-center">
          <%# SVG or image content dynamically inserted here %>
        </div>
      </div>
      
      <%# Container for displaying options (answers) to the question %>
      <div id="options" class="space-y-2 flex flex-col">
        <!-- Options (answers) dynamically inserted here -->
      </div>
      
      <div class="text-center mt-4">
      <button id="next-question" class="bg-fun-blue-500 hover:bg-fun-blue-700 text-white font-bold py-2 px-4 rounded">Next Question</button>
    </div>
    
    <div id="completion-message" class="p-6 hidden">
      <p class="text-center text-gray-600">Congratulations! You have completed the quiz.</p>
      <p class="text-center text-gray-600">You answered <span id="correct-answers"></span> questions correctly.</p>
      <p class="text-center text-gray-600">Thank you for participating.</p>
    </div>
      </div>
    </div>
  </div>
</div>

<%# Script to initialize the exam when the window loads %>
<script>
  window.onload = function() {
    const examId = <%= @exam_id %>; // Retrieve exam ID from server-side
    setCurrentUser(<%= @publicUser.to_json %>); // Set current user information
    fetchQaIds(examId); // Fetch question and answer IDs for the exam
  };
</script>

<%# Include the JavaScript file responsible for quiz functionality %>
<script src="/js/quiz.js"></script>
